
Started work at 9:00 PM. Began work by sending files to Ben Bowman. 

First order of the day is creating the writeup for 3.2. 

Question: Can we rework this to operating using code?

Completed 3.2 lab writeup.

## Assessment of BeeKeeper 

# Current state of Beekeeper

NEEDS
- Need to be able to pass information from clone to GUI backend:

Need to be able to collect the following information:

Location -
- Collect user coordinates (wifi and GPS)
- stick it on a map
User - 
- User's time
- Time zone
- Language
- Incognito
- Ad Blocker
- GPU
- Browser
- Check for Browser vulnerabilities
- Grab user agent
- Check operating system
- Architecture 
Network - 
- IP address
- IP exposed (what is this)
- Host Name
- ISP
- Likely
URIs and Inputs
- Need to be able to track input data, and time of input (and where it was input at)

On a lower level, we need to figure out how to inject code into the clone in order to collect this information. After figuring out how to achieve this - we also need to determine how to obfuscate the code to prevent attacker detection (we don't want them to know it's a honeypot!)

# Functions

- Collect Location
- Collect User
- Collect Network
- URIs and Inputs


# Location

1. Using HTML5 Geolocation Tutorial 

[video](https://www.youtube.com/watch?v=YhvLnd0ylds)

## window.navigator.getCurrentPosition(success, error, options) 

Gets the coordinates of the user *once*

- success - function to fire when success
- error - function to fire when error
- options - an optional object of options

returns information regarding the current location of the user
- Coordinates (Long, Lat)
- Accuracy (+/- in meters)


```js
function success(pos){
	const lat = pos.coords.latitude;
	const lng = pos.coords.longitude;
	const acc = pos.coords.accuracy; 

	const markup = <a href="https://www.openstreetmap.org/#map=16/${lat}/${lng}"></a>

}

function error(err) {
	if (err.code === 1) { //response code 1 is a user denied error
		alert("Please allow access to geolocation);
	}
	else {
		alert("techincal error")
	}
}

const options = {
	enableHighAccuracy: true, //get the MOST accurate location possible. Device may not be able to support this
	timeout: 2, //the amount of time in MS to wait until giving up
	maximumAge: 10000, //the amount of time in MS to remove cached positions (default is 0)
}

window.navigator.getCurrentPosition(success, error, options)
```



# To do for tomorrow

 - Need a function that if a new IP is detected, a new JSON file is created in the clone directory - can potentially put this into the write_to_json() function (check if IP file exists - do this if so, do that if not)
 - Finish the write_to_json writer to pass all types of information into the JSON file
 - Complete updating the coordinates section of the honeypot (should also determine different methods to get location, John mentioned using traceroute/hops to potentially get the visitor's IP address)
 - Choose another data section to collect


